<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en" th:include="layout :: page">
<head lang="en">
    <meta charset="UTF-8" />
    <title>FootSign / Stats - Match</title>
</head>
<body>

<div th:fragment="content">

    <div class="row">
        <h2>The last 10 matches</h2>
        <div class="col-md-8">
            <table id="lastMatchesTable" class="table table-striped table-hover result-table">
                <thead>
                    <tr>
                        <th>Members of team 1</th>
                        <th>Members of team 2</th>
                        <th>Date and time </th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="item : ${last_matches}">
                        <td th:class="${item.team1Wins()} ? 'winner' : 'looser'"><div th:each="user : ${item.team1}" th:text="${user.fullName}"></div></td>
                        <td th:class="${item.team2Wins()} ? 'winner' : 'looser'"><div th:each="user : ${item.team2}" th:text="${user.fullName}"></div></td>
                        <td th:text="${item.formatedDateOfMatch}">${item.formatedDateOfMatch}</td>
                        <td th:text="${item.matchResultToString()}">${item.matchResultToString()}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-4">
            <div id="winnersPiechart"></div>
            <div id="loosersPiechart"></div>
        </div>
    </div>

    <script th:inline="javascript">

        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart( ) {

            getDataForPieGraph("/footsign/winner_graph_data", "Winners", "winnersPiechart");
            getDataForPieGraph("/footsign/looser_graph_data", "Loosers", "loosersPiechart");
        }
    </script>
</div>
</body>
</html>